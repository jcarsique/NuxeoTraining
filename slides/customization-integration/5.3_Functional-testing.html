<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js ie6" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

<title>Nuxeo Training - ftests</title>

<meta name="description" content="Nuxeo Training - ftests">
<meta name="author" content="Nuxeo">
<meta name="viewport" content="width=1024, user-scalable=no">

<!-- Core and extension CSS files -->
<link rel="stylesheet" href="../deck.js/core/deck.core.css">
<link rel="stylesheet" href="../deck.js/extensions/goto/deck.goto.css">
<link rel="stylesheet" href="../deck.js/extensions/menu/deck.menu.css">
<link rel="stylesheet"
  href="../deck.js/extensions/navigation/deck.navigation.css">
<link rel="stylesheet" href="../deck.js/extensions/status/deck.status.css">
<link rel="stylesheet" href="../deck.js/extensions/hash/deck.hash.css">
<link rel="stylesheet" href="../deck.js/extensions/scale/deck.scale.css">

<!-- Nuxeo Slide Default theme -->
<link rel="stylesheet"
  href="../nuxeo-slide-template/themes/style/nuxeo-theme.css">

<!-- Nuxeo Slide with comments theme -->
<link rel="stylesheet alternate" title="with comments"
  href="../nuxeo-slide-template/themes/style/nuxeo-theme-with-comments.css">

<!-- Transition theme. More available in /themes/transition/ or create your own. -->
<link rel="stylesheet"
  href="../nuxeo-slide-template/themes/transition/nuxeo-transition.css">

<script src="../deck.js/modernizr.custom.js"></script>
</head>

<body class="deck-container">

  <!-- Nuxeo Logo Training -->
  <div class="nuxeo-logo">
    <span class="nuxeo">nuxeo</span> <span class="slash">/</span> <span
      class="sub-part training">Trainings</span>
  </div>


  <section class="slide no-md"
    id="nuxeo-training---functional-testing-selenium-server-startup">
    <h1>Nuxeo Training - Functional testing – Selenium – Server
      startup</h1>
  </section>

  <section class="slide no-md" id="functional-testing-why">
    <h3>Functional testing? Why?</h3>
    <ul>
      <li>Prevent and fix regressions ASAP
        <ul>
          <li>The later we find a regression, the harder it is to
            fix</li>
          <li>We know who has broken the test with the Continuous
            Integration system</li>
        </ul>
      </li>
      <li>Makes developers work less risky
        <ul>
          <li>Development is safer</li>
          <li>Switching versions of Nuxeo, Eclipse, etc. is safe</li>
        </ul>
      </li>
      <li>Product owner knows and has defined the scenarios</li>
    </ul>
  </section>

  <section class="slide no-md" id="common-misconceptions">
    <h3>Common Misconceptions</h3>
    <ul>
      <li>&quot;Functional testing is a waste of time&quot;
        <ul>
          <li>There is no project without regressions</li>
          <li>It takes time to fix regressions</li>
          <li>Time spent on regressions is not taken into account
            when estimating total project time</li>
          <li>Sometimes regressions are discovered … a few hours
            before the delivery</li>
        </ul>
      </li>
    </ul>
  </section>

  <section class="slide no-md" id="test-driven-development-tdd">
    <h3>Test Driven Development (TDD)</h3>
    <ul>
      <li>Developers write Unit tests and basic APIs before writing
        any line of implementation code. Then they fix their tests one
        by one by writing the implementation.
        <ul>
          <li>It helps for a good user-oriented design</li>
          <li>It makes your APIs and your design simpler</li>
          <li>Your code is covered in the CI system if it breaks</li>
          <li>You know that your code works</li>
        </ul>
      </li>
    </ul>
  </section>

  <section class="slide no-md" id="behaviour-development-driven">
    <h3>Behaviour Development Driven</h3>
    <ul>
      <li>Can be applied for functional tests:
        <ul>
          <li>The developer AND the product owner write the user
            story (test scenario)</li>
          <li>The developer writes a fake functional test</li>
          <li>The developer writes the user story (in Java)</li>
          <li>The developer writes the real functional test and
            make it work for the scenario</li>
        </ul>
      </li>
      <li>No more misunderstandings between developers and the
        product owner</li>
    </ul>
  </section>

  <section class="slide no-md" id="tools-we-can-use">
    <h3>Tools we can use</h3>
    <ul>
      <li>Eclipse RCP projects:
        <ul>
          <li>SWT Bot: We control the application from a Java JUnit
            test</li>
          <li>Concordion: With a test scenario written in html, it
            drives a test case and generates nice reports</li>
        </ul>
      </li>
      <li>Web projects:
        <ul>
          <li>Old way: Selenium (test driven with javascript)</li>
          <li>Webdriver: We control the application from a Java
            JUnit test + Corcordion</li>
        </ul>
      </li>
    </ul>
  </section>

  <section class="slide no-md" id="selenium-cookbook">
    <h3>Selenium Cookbook</h3>
    <ul>
      <li>A nice example of a functional test suite done with
        Selenium and testing a Nuxeo project :
        <ul>
          <li>nuxeo/nuxeo-distribution/nuxeo-distribution-dm/ftest/selenium</li>
        </ul>
      </li>
    </ul>
  </section>

  <section class="slide no-md" id="selenium-cookbook-1">
    <h3>Selenium Cookbook</h3>
    <ul>
      <li>Looking at each test, you'll find the same pattern: A
        command, a target, a value </li>
      <li><p>For example in login test</p> <pre>
          <code>
    &lt;tr&gt;
      &lt;td&gt;setTimeout&lt;/td&gt;
      &lt;td&gt;120000&lt;/td&gt;
      &lt;td&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;open&lt;/td&gt;
      &lt;td&gt;/nuxeo/logout&lt;/td&gt;
      &lt;td&gt;&lt;/td&gt;
    &lt;/tr&gt;
</code>
        </pre></li>
    </ul>
  </section>

  <section class="slide no-md" id="selenium-cookbook-2">
    <h3>Selenium Cookbook</h3>
    <ul>
      <li>Download Selenium IDE - a Firefox plugin to help develop
        Selenium tests http://seleniumhq.org/projects/ide/ </li>
      <li>Open one of the tests with Selenium IDE
        <ul>
          <li>In the command input box, you have a drop down list
            where you can select an existing command.</li>
          <li>The target is often an element of the DOM as an
            xpath. You can insert it or get suggestions by right
            clicking on the element with Firefox</li>
          <li>You can run the test and insert break points</li>
        </ul>
      </li>
    </ul>
  </section>

  <section class="slide no-md" id="record">
    <h3>Record</h3>
    <ul>
      <li>Selenium IDE
        <ul>
          <li>Actions
            <ul>
              <li>–Record</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Pros
        <ul>
          <li>Don't need to look for target location</li>
        </ul>
      </li>
      <li>Cons
        <ul>
          <li>Not always generated what you want</li>
        </ul>
      </li>
    </ul>
  </section>

  <section class="slide no-md" id="selenium-cookbook-3">
    <h3>Selenium Cookbook</h3>
    <ul>
      <li>Set up is very important:
        <ul>
          <li>Import the user-extensions.js into your Selenium IDE</li>
          <li>It contains custom commands written in javascript</li>
        </ul>
      </li>
    </ul>
  </section>

  <section class="slide no-md" id="selenium-cons">
    <h3>Selenium Cons</h3>
    <ul>
      <li>Not easy to avoid copy/pasting (you will find the same
        login.html test in almost all the Nuxeo functional tests) </li>
      <li>Written in javascript </li>
      <li>Not easy to read and understand the scenario  </li>
      <li>Solution in the near future: Webdriver and Concordion</li>
    </ul>
  </section>

  <section class="slide no-md" id="selenium-continious-integration">
    <h3>Selenium Continious Integration</h3>
    <ul>
      <li>Use nuxeo-distribution-tools and nuxeo-ftest to
        <ul>
          <li>Automatically start a nuxeo tomcat server (retrieved
            through Maven)</li>
          <li>Launch the selenium test</li>
        </ul>
      </li>
    </ul>
  </section>

  <section class="slide no-md" id="samples">
    <h3>Samples</h3>
    <p>See
      <a href="https://github.com/nuxeo/nuxeo-marketplace-sample/tree/master/ftest/selenium">samples</a></p>
    <ul>
      <li>pom.xml</li>
      <li>itest.xml</li>
    </ul>
  </section>

  <section class="slide no-md" id="rtfm">
    <h3>RTFM</h3>
    <ul>
      <li><a href="http://doc.nuxeo.com/x/eQQz">http://doc.nuxeo.com/x/eQQz</a></li>
    </ul>

  </section>

  <section class="slide no-md"
    id="functional-testing-selenium-server-startup">
    <h2>Exercises - Functional testing – Selenium – Server startup</h2>
  </section>

  <section class="slide no-md exercise" id="create-the-maven-project">
      <img src="../nuxeo-slide-template/themes/exercise.svg" alt="exercise"
      class="exercise-icon">
    <h3>Create the maven project</h3>
    <p>
      Create the maven project for selenium: Take the <a
        href="https://github.com/nuxeo/nuxeo-marketplace-sample/tree/master/ftest/selenium">sample
        project</a> as an example.
    </p>
  </section>

  <section class="slide no-md exercise" id="selenium-ide">
      <img src="../nuxeo-slide-template/themes/exercise.svg" alt="exercise"
      class="exercise-icon">
    <h3>Selenium IDE</h3>
    <ul>
      <li>In firefox, install Selenium IDE addon </li>
      <li>Create a new suite, create a new test </li>
      <li>Start a server manually </li>
      <li>Click on record </li>
      <li>In the browser, login as Administrator, logout and stop
        recording </li>
      <li>Add a « assertTextPresent » command with « Default
        domain » as value, before the logout action </li>
      <li>Save the test suite
        <ul>
          <li>The test in ftest/selenium/tests/login/login.html</li>
          <li>The suite in ftest/selenium/tests/suite.html</li>
        </ul>
      </li>
    </ul>
  </section>

  <section class="slide no-md"
    id="nuxeo-training---functional-testing-webdriver">
    <h1>Nuxeo Training - Functional testing – Webdriver</h1>
  </section>

  <section class="slide no-md" id="webdriver">
    <h3>Webdriver ?</h3>
    <ul>
      <li>New version of selenium completly rewritten
        <ul>
          <li>Write your test Java</li>
          <li>Selenium 2</li>
          <li>In a junit (or any other test framework) test case</li>
        </ul>
      </li>
    </ul>
  </section>

  <section class="slide no-md" id="pros">
    <h3>Pros</h3>
    <ul>
      <li>Test are written in Java
        <ul>
          <li>It's possible to design your test as a real
            application</li>
          <li>Nuxeo is a framework, you are usually reusing some
            Nuxeo features
            <ul>
              <li>We can now do the same in webdriver : Reuse
                pages and actions and more!</li>
              <li>Check nxueo-functional-test out !</li>
            </ul>
          </li>
          <li>Simpler to read using the page pattern</li>
        </ul>
      </li>
    </ul>
  </section>

  <section class="slide no-md" id="webdriver-basics:-2-main-classes">
    <h3>Webdriver basics: 2 Main classes</h3>
    <ul>
      <li>WebDriver
        <ul>
          <li>Drive a webbrowser</li>
          <li><code>FirefoxDriver</code> is the one we will use</li>
          <li><code>HtmlUnitDriver</code> (faster, in memory browser)</li>
        </ul>
      </li>
      <li>WebElement
        <ul>
          <li>DOM Node</li>
          <li>Represent a button, text field, link, etc …</li>
        </ul>
      </li>
    </ul>
  </section>
  <section class="slide no-md" id="webdriver-basics:-find-an-element">
    <h3>Webdriver basics: Find an element</h3>
    <ul>
      <li>Returns a webelement
        <ul>
          <li><code>driver.findElementBy(By.xpath(String xpath))</code></li>
          <li><code>driver.findElementBy(By.id(String id))</code></li>
        </ul>
      </li>
    </ul>
  </section>
  <section class="slide no-md" id="webdriver-basics:-element-actions">
    <h3>Webdriver basics: Element actions</h3>
    <ul>
      <li>According to the element type :
        <ul>
          <li><code>webElement.click()</code></li>
          <li><code>webElement.sendKeys(String string)</code></li>
          <li><code>webElement.submit()</code></li>
        </ul>
      </li>
    </ul>
  </section>
  <section class="slide no-md" id="driver-methods">
    <h3>Driver methods</h3>
    <ul>
      <li><code>Driver.get(String url)</code></li>
      <li><code>Driver.quit()</code></li>
    </ul>
  </section>
  <section class="slide no-md" id="webdriver-basics:-example">
    <h3>Webdriver basics: Example</h3>
    <p>
      <a
        href="http://code.google.com/p/selenium/wiki/GettingStartedM](http://bit.ly/LzM5pM">http://code.google.com/p/selenium/wiki/GettingStarted</a>
    </p>
  </section>

  <section class="slide no-md" id="page-oriented">
    <h3>Page oriented</h3>
    <p>
      See <a
        href="https://github.com/nuxeo/nuxeo-distribution/blob/master/nuxeo-functional-tests/src/main/java/org/nuxeo/functionaltests/pages/LoginPage.java">LoginPage.java</a>
    </p>
  </section>

  <section class="slide no-md" id="page-oriented-1">
    <h3>Page oriented</h3>
    <ul>
      <li>Java – Web page mapping
        <ul>
          <li>Web Pages → objects</li>
          <li>WebElements → object attributes</li>
          <li>Actions → object methods</li>
        </ul>
      </li>
      <li>Load a page: <code>
          PageFactory.initElements(driver, LoginPage.class);</code>
      </li>
    </ul>
  </section>

  <section class="slide no-md" id="nuxeos">
    <h3>Nuxeo's</h3>
    <ul>
      <li>Ready to use pages
        <ul>
          <li>Login</li>
          <li>DocumentBasePage</li>
          <li>User Manager</li>
          <li>Admin center</li>
        </ul>
      </li>
      <li>@Required and AbstractTest.asPage()
        <ul>
          <li>Wait for the annotated element to load before
            returning the page</li>
        </ul>
      </li>
      <li>Junit Classes needs to starts with IT</li>
    </ul>
  </section>
  <section class="slide no-md" id="examples">
    <h3>Examples</h3>
    <ul>
      <li><a
        href="https://github.com/nuxeo/nuxeo-distribution/tree/master/nuxeo-distribution-dm/ftest/webdriver/src/test/java/org/nuxeo/functionaltests">https://github.com/nuxeo/nuxeo-distribution/tree/master/nuxeo-distribution-dm/ftest/webdriver/src/test/java/org/nuxeo/functionaltests</a></li>
    </ul>
  </section>
  <section class="slide no-md"
    id="exercise---functional-testing-webdriver">
    <h2>Exercise - Functional testing – Webdriver</h2>
  </section>

  <section class="slide no-md exercise" id="create-a-new-project">
      <img src="../nuxeo-slide-template/themes/exercise.svg" alt="exercise"
      class="exercise-icon">
    <h3>Create a new project</h3>
    <ul>
      <li>ftest/webdriver </li>
      <li>pom.xml </li>
      <li>itest.xml</li>
    </ul>
    <p>
      taking the <a
        href="https://github.com/nuxeo/nuxeo-marketplace-sample/tree/master/ftest/webdriver">market
        sample</a> as example
    </p>
  </section>

  <section class="slide no-md exercise" id="ittest">
      <img src="../nuxeo-slide-template/themes/exercise.svg" alt="exercise"
      class="exercise-icon">
    <h3>ITTest</h3>
    <ul>
      <li>Import the project in Eclipse (mvn eclipse:eclipse) </li>
      <li>Create a new test that log in as Administrator (the
        password has changed) and check that the user connected is
        Administrator </li>
      <li>Launch a server, Launch the test from eclipse </li>
      <li>Try to launch the test from maven (stop the server first)</li>
    </ul>
  </section>
  <section class="slide no-md" id="questions">
    <h2>Questions?</h2>
  </section>


  <!-- deck.navigation snippet -->
  <a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
  <a href="#" class="deck-next-link" title="Next">&#8594;</a>

  <!-- deck.status snippet -->
  <p class="deck-status">
    <span class="deck-status-current"></span> / <span
      class="deck-status-total"></span>
  </p>

  <!-- deck.goto snippet -->
  <form action="." method="get" class="goto-form">
    <label for="goto-slide">Go to slide:</label> <input type="text"
      name="slidenum" id="goto-slide" list="goto-datalist">
    <datalist id="goto-datalist"></datalist>
    <input type="submit" value="Go">
  </form>

  <!-- deck.hash snippet -->
  <a href="." title="Permalink to this slide" class="deck-permalink">#</a>

  <!-- Grab CDN jQuery, with a protocol relative URL; fall back to local if offline -->
  <script
    src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <!-- script>window.jQuery || document.write('<script src="../deck.js/jquery-1.7.2.min.js"><\/script>')</script -->
  <script>window.jQuery || document.write('<script src="../deck.js/jquery-1.7.2.min.js"><\/script>')</script>


  <!-- Deck Core and extensions -->
  <script src="../deck.js/core/deck.core.js"></script>
  <script src="../deck.js/extensions/hash/deck.hash.js"></script>
  <script src="../deck.js/extensions/menu/deck.menu.js"></script>
  <script src="../deck.js/extensions/goto/deck.goto.js"></script>
  <script src="../deck.js/extensions/status/deck.status.js"></script>
  <script src="../deck.js/extensions/navigation/deck.navigation.js"></script>
  <script src="../deck.js/extensions/scale/deck.scale.js"></script>
  <script src="../deck.js-markdown/deck.markdown.js/Markdown.Converter.js"></script>
  <script src="../deck.js-markdown/deck.markdown.js/deck.markdown.js"></script>
  <!-- Initialize the deck -->
  <script>
					$(function() {
						$.deck('.slide');
					});
				</script>
</body>
</html>
